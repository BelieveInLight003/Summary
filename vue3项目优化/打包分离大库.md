### 拆包

###### 在 build.output.manualChunks 配置，需要手动引用

- 单独列出来的大包，会被打包到 assets 目录下，不符合原来的资源文件，浏览器打开 dist/index.html 会报错 404， 找不到这些文件
- Vite/Rollup 只有在「动态 import()」或「入口 import」里显式引用的 chunk 才会被 vite:manifest 写进预加载列表；
  manualChunks 硬拆出来的文件如果没有被任何入口或动态 import 触及，它就不会出现在最终 HTML 的 <script type="module"> 里，于是浏览器自己去猜文件名 → 404
  （空引用会被 Tree-Shaking 删掉真正无用代码，但 chunk 本身会保留）

```
# 需要在main.ts里面做，空引入

```

###### 插件： vite-plugin-chunk-split 官方插件已帮你做“被引用”关系，拆完自动注入，无需空引用。

```
// vite.config.ts
import { chunkSplitPlugin } from 'vite-plugin-chunk-split';

export default defineConfig({
  plugins: [
    chunkSplitPlugin({
      strategy: 'all-in-one',
      customSplitting: {
        'vendor-charts': ['echarts', 'zrender'],
        'vendor-dayjs': ['dayjs'],
        'vendor-lodash': ['lodash-es'],
        'vendor-axios': ['axios'],
      },
    }),
  ],
});
```
